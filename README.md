# Receipt API

This is a REST API for creating and viewing receipts with user registration and authentication.

## Technologies

- Python 3.13.3
- FastAPI
- PostgreSQL
- SQLAlchemy
- Pydantic
- Alembic (for migrations)

## Setup and Launch

### 1. Clone the repository

```bash
git clone <repository_url>
cd receipt_api
```

### 2. Create and activate a virtual environment

```bash
python -m venv venv
source venv/bin/activate  # for Linux/macOS
venv\Scripts\activate  # for Windows
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

### 4. Set up PostgreSQL database

Make sure PostgreSQL is installed and running. Create a new database, for example, `receipt_db`.

### 5. Configure environment variables

Create a `.env` file in the root directory of the project and add the following variables:

```
DATABASE_URL=postgresql+asyncpg://<user>:<password>@<host>:<port>/<db_name>
SECRET_KEY=your_super_secret_key
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
```

Replace `<user>`, `<password>`, `<host>`, `<port>`, and `<db_name>` with your PostgreSQL credentials.

### 6. Apply database migrations

To create tables in the database, you need to set up and run Alembic.

First, initialize Alembic (if not done already):

```bash
alembic init alembic
```

Then edit the `alembic.ini` file to specify your database path:

```ini
sqlalchemy.url = postgresql+asyncpg://<user>:<password>@<host>:<port>/<db_name>
```

Edit `alembic/env.py` so that Alembic knows about your models. Copy the code from a similar script in the repository with the modified code.

Create a migration:

```bash
alembic revision --autogenerate -m "Initial migration"
```

Apply the migration:

```bash
alembic upgrade head
```

### 7. Run the application

```bash
uvicorn app.main:app --reload
```

The application will be available at `http://127.0.0.1:8000`.

## API Documentation

API documentation (Swagger UI) is automatically generated by FastAPI and is available at `http://127.0.0.1:8000/docs`.

ReDoc documentation is available at `http://127.0.0.1:8000/redoc`.